@model CapaModelo.SolicitudAOCR

@{
    ViewBag.Title = "Validación Final";
}

<h2><i class="glyphicon glyphicon-ok-circle"></i> Validación Final - Dirección</h2>
<hr />

<div class="panel panel-info">
    <div class="panel-heading">
        <h3 class="panel-title">Resumen de la Solicitud</h3>
    </div>
    <div class="panel-body">
        <dl class="dl-horizontal">
            <dt>Solicitud N°:</dt>
            <dd>@Model.Id</dd>
            <dt>Operador:</dt>
            <dd>@Model.NombreOperador</dd>
            <dt>RUC:</dt>
            <dd>@Model.RUC</dd>
            <dt>Tipo de Operación:</dt>
            <dd>@Model.TipoOperacion</dd>
            <dt>Matrícula:</dt>
            <dd>@Model.Matricula</dd>
            <dt>Estado Actual:</dt>
            <dd><span class="label label-warning">@Model.Estado</span></dd>
        </dl>
    </div>
</div>

<!-- Resumen de Fases -->
<div class="row">
    <div class="col-md-6">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h4>Fase 1: Documentación</h4>
            </div>
            <div class="panel-body">
                <p><i class="glyphicon glyphicon-ok text-success"></i> Documentación completa y verificada</p>
                <p><strong>Fecha:</strong> @DateTime.Now.AddDays(-30).ToString("dd/MM/yyyy")</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h4>Fase 2: Pagos</h4>
            </div>
            <div class="panel-body">
                <p><i class="glyphicon glyphicon-ok text-success"></i> Pago validado y viáticos asignados</p>
                <p><strong>Fecha:</strong> @DateTime.Now.AddDays(-25).ToString("dd/MM/yyyy")</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h4>Fase 3: Revisión Técnica</h4>
            </div>
            <div class="panel-body">
                <p><i class="glyphicon glyphicon-ok text-success"></i> Documentación técnica aprobada</p>
                <p><strong>Fecha:</strong> @DateTime.Now.AddDays(-20).ToString("dd/MM/yyyy")</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h4>Fase 4: Inspección en Campo</h4>
            </div>
            <div class="panel-body">
                <p><i class="glyphicon glyphicon-ok text-success"></i> Inspección realizada - APROBADA</p>
                <p><strong>Fecha:</strong> @DateTime.Now.AddDays(-5).ToString("dd/MM/yyyy")</p>
            </div>
        </div>
    </div>
</div>

@using (Html.BeginForm("ValidacionFinal", "Direccion", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.Id)

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Validación del Director</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label class="col-md-3 control-label">Decisión Final *</label>
                <div class="col-md-9">
                    <label class="radio-inline">
                        <input type="radio" name="aprobada" value="true" required />
                        <span class="text-success"><strong>APROBAR EMISIÓN DE AOCR</strong></span>
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="aprobada" value="false" required />
                        <span class="text-danger"><strong>RECHAZAR SOLICITUD</strong></span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Observaciones del Director</label>
                <div class="col-md-9">
                    <textarea name="observaciones" class="form-control" rows="5" placeholder="Ingrese observaciones o consideraciones adicionales..."></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Condiciones Especiales</label>
                <div class="col-md-9">
                    <textarea name="condicionesEspeciales" class="form-control" rows="3" placeholder="Condiciones especiales para la operación (si aplica)..."></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Vigencia del Certificado (años)</label>
                <div class="col-md-9">
                    <select name="vigencia" class="form-control">
                        <option value="1">1 año</option>
                        <option value="2" selected>2 años</option>
                        <option value="3">3 años</option>
                        <option value="5">5 años</option>
                    </select>
                </div>
            </div>

            <div class="alert alert-info">
                <strong><i class="glyphicon glyphicon-info-sign"></i> Nota:</strong>
                Una vez aprobada, la solicitud pasará a la fase de legalización para la firma del Director y posterior emisión del certificado AOCR.
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-3 col-md-9">
            <button type="submit" class="btn btn-success btn-lg">
                <i class="glyphicon glyphicon-ok"></i> Validar y Continuar
            </button>
            <a href="@Url.Action("Index", "Home")" class="btn btn-default btn-lg">
                <i class="glyphicon glyphicon-arrow-left"></i> Cancelar
            </a>
        </div>
    </div>
}