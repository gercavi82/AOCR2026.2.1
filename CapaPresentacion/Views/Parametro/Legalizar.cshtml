@model CapaModelo.SolicitudAOCR

@{
    ViewBag.Title = "Legalizar Certificado";
}

<h2><i class="glyphicon glyphicon-pencil"></i> Legalización del Certificado AOCR</h2>
<hr />

<div class="panel panel-info">
    <div class="panel-heading">
        <h3 class="panel-title">Información del Certificado</h3>
    </div>
    <div class="panel-body">
        <dl class="dl-horizontal">
            <dt>Solicitud N°:</dt>
            <dd>@Model.Id</dd>
            <dt>Operador:</dt>
            <dd>@Model.NombreOperador</dd>
            <dt>RUC:</dt>
            <dd>@Model.RUC</dd>
            <dt>Tipo de Operación:</dt>
            <dd>@Model.TipoOperacion</dd>
            <dt>Estado:</dt>
            <dd><span class="label label-success">Validado para Emisión</span></dd>
        </dl>
    </div>
</div>

<div class="panel panel-warning">
    <div class="panel-heading">
        <h3 class="panel-title">Vista Previa del Certificado</h3>
    </div>
    <div class="panel-body" style="background-color: #f9f9f9; border: 2px solid #ddd; padding: 30px;">
        <div style="text-align: center; margin-bottom: 30px;">
            <h3><strong>REPÚBLICA DEL ECUADOR</strong></h3>
            <h4>DIRECCIÓN GENERAL DE AVIACIÓN CIVIL</h4>
            <hr />
            <h3><strong>CERTIFICADO DE OPERADOR AÉREO</strong></h3>
            <h4>(Air Operator Certificate - AOCR)</h4>
        </div>

        <div style="margin: 30px 0;">
            <p><strong>Certificado N°:</strong> AOCR-@DateTime.Now.Year-@Model.Id.ToString("D4")</p>
            <p><strong>Fecha de Emisión:</strong> @DateTime.Now.ToString("dd/MM/yyyy")</p>
            <p><strong>Fecha de Vencimiento:</strong> @DateTime.Now.AddYears(2).ToString("dd/MM/yyyy")</p>
        </div>

        <div style="margin: 30px 0;">
            <p>Se certifica que:</p>
            <p><strong>@Model.NombreOperador</strong></p>
            <p><strong>RUC:</strong> @Model.RUC</p>
            <p><strong>Dirección:</strong> @Model.DireccionFisica</p>
        </div>

        <div style="margin: 30px 0;">
            <p>Ha cumplido con todos los requisitos establecidos en la normativa aeronáutica vigente y está autorizado para realizar operaciones de:</p>
            <p style="text-align: center;"><strong>@Model.TipoOperacion</strong></p>
        </div>

        <div style="margin: 30px 0;">
            <p><strong>Aeronave(s) Autorizada(s):</strong></p>
            <ul>
                <li>Matrícula: @Model.Matricula - Modelo: @Model.Modelo</li>
            </ul>
        </div>

        <div style="margin-top: 50px;">
            <div class="row">
                <div class="col-md-6" style="text-align: center;">
                    <p>_______________________________</p>
                    <p><strong>[Nombre del Director]</strong></p>
                    <p>Director General de Aviación Civil</p>
                </div>
                <div class="col-md-6" style="text-align: center;">
                    <p style="margin-bottom: 50px;">[SELLO OFICIAL]</p>
                </div>
            </div>
        </div>
    </div>
</div>

@using (Html.BeginForm("Legalizar", "Direccion", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.Id)

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Firma del Director</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label class="col-md-3 control-label">Nombre del Director *</label>
                <div class="col-md-9">
                    <input type="text" name="nombreDirector" class="form-control" placeholder="Nombre completo del Director" required />
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Cargo *</label>
                <div class="col-md-9">
                    <input type="text" name="cargoDirector" class="form-control" value="Director General de Aviación Civil" readonly />
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Fecha de Firma</label>
                <div class="col-md-9">
                    <input type="date" name="fechaFirma" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" readonly />
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Firma Digital</label>
                <div class="col-md-9">
                    <input type="file" name="firmaDigital" class="form-control" accept=".p12,.pfx" />
                    <p class="help-block">Archivo de firma digital (opcional)</p>
                </div>
            </div>

            <div class="alert alert-warning">
                <strong><i class="glyphicon glyphicon-warning-sign"></i> Importante:</strong>
                Al legalizar este certificado, se generará el documento oficial que será entregado al operador aéreo.
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-3 col-md-9">
            <button type="submit" class="btn btn-success btn-lg">
                <i class="glyphicon glyphicon-ok"></i> Legalizar Certificado
            </button>
            <button type="button" class="btn btn-info btn-lg" onclick="window.print();">
                <i class="glyphicon glyphicon-print"></i> Vista Previa
            </button>
            <a href="@Url.Action("ValidacionFinal", new { id = Model.Id })" class="btn btn-default btn-lg">
                <i class="glyphicon glyphicon-arrow-left"></i> Volver
            </a>
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}